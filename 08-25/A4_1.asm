TITLE A4_1:ASSIGNMENT_4_QUES_BOTH PARTS
.MODEL SMALL
.STACK 100H
.DATA
    ENDL DB 0DH,0AH,'$'
	ENTR DB 'Enter the array :$'
	NUM DB 'Enter the number to be searched for :$'
	FOUND DB 'The number was found at position : $'
	NOT_FOUND DB 'Number not found$'
	ARR DW 100 DUP(?)
	SORTED DB 'Sorted Array :$'
.CODE

;MAIN PROCEDURE
MAIN PROC
	MOV AX,@DATA
	MOV DS,AX
	MOV ES,AX
		MOV AH,9
		LEA DX,ENTR
		INT 21H
		LEA DX,ENDL
		INT 21H
	CALL INPUT
		MOV AH,9
		LEA DX,SORTED
		INT 21H
		LEA DX,ENDL
		INT 21H
	CALL PRINT
		MOV AH,9
		LEA DX,NUM
		INT 21H
		LEA DX,ENDL
		INT 21H
	CALL SEARCH
	MOV AH,4CH
	INT 21H
MAIN ENDP

;PROCEDURE TO TAKE ARRAY INPUT FROM THE USER WHILE SORTING IT
INPUT PROC
	PUSH AX
	PUSH BX
	PUSH DX
	XOR CX,CX
	CLD
	LEA DI,ARR
	LOOP1:
		CALL PRINT
		CALL INDEC
		CMP AL,1BH
		JE END_1
		LEA SI,ARR
		XOR BX,BX
		LOOP2:
			CMP BX,CX
			JE END_LOOP1
			MOV DX,[SI]
			CMP DX,AX
			JE LOOP1
			JL END_LOOP2
			JG INSERT
			INSERT:
				PUSH DI
				MOV SI,DI
				SUB SI,2
				STD
				SHIFT:
					CMP BX,CX
					JGE STORE
					MOVSW
					INC BX
					JMP SHIFT
				STORE:
					INC CX
					CLD
					STOSW
					POP DI
					ADD DI,2
					JMP LOOP1
			END_LOOP2:
				INC BX
				ADD SI,2
				JMP LOOP2
		END_LOOP1:
			INC CX
			CLD
			STOSW
			JMP LOOP1
	END_1:
		POP DX
		POP BX
		POP AX
		RET
INPUT ENDP

;PROCEDURE TO DISPLAY THE ARRAY
PRINT PROC
	PUSH AX
	PUSH CX
	PUSH DX
	PUSH DI
	JCXZ END23
	LEA DI,ARR
	LP1:
		MOV AX,[DI]
		ADD DI,2
		CALL OUTDEC
		MOV AH,9
		LEA DX,ENDL
		INT 21H
		LOOP LP1
	END23:
	POP DI
	POP DX
	POP CX
	POP AX
	RET
PRINT ENDP

;PROCEDURE TO SEARCH THE NUMBER IN THE ARRAY
SEARCH PROC
	PUSH AX
	PUSH BX
	PUSH CX
	PUSH DX
	CALL INDEC
	JCXZ END2
	LEA DI,ARR
	XOR BX,BX
	LOOP3:
		INC BX
		MOV DX,[DI]
		CMP AX,DX
		JE END_SUCCESS
		ADD DI,2
		LOOP LOOP3
	END2:
		MOV AH,9
		LEA DX,NOT_FOUND
		INT 21H
		LEA DX,ENDL
		INT 21H
		JMP END3
	END_SUCCESS:
		MOV AH,9
		LEA DX,FOUND
		INT 21H
		LEA DX,ENDL
		INT 21H
		MOV AX,BX
		CALL OUTDEC
	END3:
		POP DX
		POP CX
		POP BX
		POP AX
		RET
SEARCH ENDP
INCLUDE d:\INDEC.ASM
INCLUDE d:\OUTDEC.ASM
END MAIN